{#
  Single post/page template
  Used for displaying individual consciousness research articles
#}
{% extends "base.twig" %}

{% block content %}
    <article class="research-article post-{{ post.ID }}">

        {# Post Header #}
        <header class="article-header">
            <h1 class="article-title">{{ post.title }}</h1>

            <div class="article-meta">
                <time datetime="{{ post.date }}">
                    {{ post.date|format_research_date }}
                </time>

                {% if post.author %}
                    <span class="author">by {{ post.author.name }}</span>
                {% endif %}

                {# Research Categories #}
                {% if post.terms('category') %}
                    <div class="research-categories">
                        {% for category in post.terms('category') %}
                            <span class="category-badge">{{ category.name }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </header>

        {# Featured Image #}
        {% if post.thumbnail %}
            <div class="article-featured-image">
                <img src="{{ post.thumbnail.src('large') }}"
                     alt="{{ post.thumbnail.alt }}"
                     loading="lazy">
            </div>
        {% endif %}

        {# Post Content #}
        <div class="article-content">
            {{ post.content }}
        </div>

        {# Research Metadata (if using custom fields) #}
        {% if post.meta('research_category') %}
            <aside class="research-metadata">
                <h3>Research Details</h3>
                <dl>
                    <dt>Research Category:</dt>
                    <dd>{{ post.meta('research_category') }}</dd>

                    {% if post.meta('quantum_relevance') %}
                        <dt>Quantum Relevance:</dt>
                        <dd>{{ post.meta('quantum_relevance') }}</dd>
                    {% endif %}
                </dl>
            </aside>
        {% endif %}

        {# Related Posts #}
        {% if post.related_posts %}
            <section class="related-research">
                <h3>Related Research</h3>
                <div class="related-posts-grid">
                    {% for related in post.related_posts %}
                        <article class="related-post">
                            <h4>
                                <a href="{{ related.link }}">{{ related.title }}</a>
                            </h4>
                            <p>{{ related.preview(150) }}</p>
                        </article>
                    {% endfor %}
                </div>
            </section>
        {% endif %}

    </article>
{% endblock %}
